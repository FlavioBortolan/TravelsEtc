
ModelForm Widget attributes generation

Hallo
What is the proper way to have Django rendering widgets to  html elements with proper attributes?

Following the documentation I did the following for my class:


class UserProfileInfo(models.Model):

    user = models.OneToOneField(User, on_delete=models.CASCADE)
    profile_pic = models.ImageField(upload_to='TravelsApp/profile_pics',blank=True)
    phone_number = models.CharField()
    credits = models.PositiveIntegerField(default=10)
    exp_date = models.DateField(default = timezone.now)

.....

class UserProfileInfoForm(forms.ModelForm):

    class Meta():

        model = UserProfileInfo
        fields = ('profile_pic', 'phone_number', 'exp_date')
        widgets = {
            'profile_pic':              forms.ClearableFileInput(attrs={'class': "w3-btn w3-blue w3-center"}),
            'phone_number':             forms.TextInput(attrs={'class': "w3-input", 'required':'True'}),
            'exp_date':                 forms.DateInput(attrs={'class': "w3-input", 'required':'False', 'disabled': 'True'}),

        }

.......

VIEW:
    
    def register(request):
    
    .......
     
    # GET: Just render the forms as blank.
    user_form = UserForm()
    profile_form = UserProfileInfoForm()

    return render(request,'TravelsApp/registration.html',
                          {'user_form':user_form,
                           'profile_form':profile_form,
                           })



When register() gets called and the code after #GET is executed the 'exp_date' UserProfileInfoForm is not rendered properly :

<p><label for="id_exp_date">Exp date:</label> <input type="text" name="exp_date" value="2021-07-21" class="w3-input" disabled="True" required id="id_exp_date">
<input type="hidden" name="initial-exp_date" value="2021-07-21 20:06:53+00:00" id="initial-id_exp_date"></p>

The attribute 'required' is present (hence meaning required = true) while it should be set to false
(It also generates this 'initial-exp-date' which is hidden and I think it's added just for security reasons)

I tried to play around for one long evening then I noticed that if I change the form definition removing the 'exp_date' from the 'fields' list and adding it as a Field before the 'Meta' then the result is correct:

class UserProfileInfoForm(forms.ModelForm):

    exp_date = forms.DateField(required=False, widget = forms.DateInput(attrs={'class': "w3-input", 'disabled': 'True'}))

    class Meta():

        model = UserProfileInfo
        fields = ('profile_pic', 'phone_number')
        widgets = {
            'profile_pic':              forms.ClearableFileInput(attrs={'class': "w3-btn w3-blue w3-center"}),
            'phone_number':             forms.TextInput(attrs={'class': "w3-input", 'required':'True'}), 
        }

<p><label for="id_exp_date">Exp date:</label> <input type="text" name="exp_date" class="w3-input" disabled="True" required="False" id="id_exp_date"></p>


But I dont' understand why.
In the docs it seems that to insert a Field in the 'fields' list or directly as a class member (outside the 'Meta') should be quite equivalent but in my case the behaviour is totally different...

